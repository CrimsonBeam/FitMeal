const themeToggleButton = document.getElementById('theme-toggle'),themeIcon = document.getElementById('theme-icon');function applySavedTheme(){const savedTheme = localStorage.getItem('theme');document.body.classList.toggle('dark-mode',savedTheme==='dark-mode');themeIcon.classList.toggle('fa-moon',savedTheme==='dark-mode');themeIcon.classList.toggle('fa-sun',savedTheme!=='dark-mode');}themeToggleButton.addEventListener('click',()=>{document.body.classList.toggle('dark-mode');themeIcon.classList.toggle('fa-moon');themeIcon.classList.toggle('fa-sun');localStorage.setItem('theme',document.body.classList.contains('dark-mode')?'dark-mode':'light');});document.addEventListener('DOMContentLoaded',applySavedTheme);const steps = document.querySelectorAll('.step');let currentStep = 0;function validateCurrentStep(){const inputs = steps[currentStep].querySelectorAll('input[required]');return Array.from(inputs).every(input=>{const valid = input.checkValidity();input.classList.toggle('border-red-500',!valid);return valid;});}document.querySelectorAll('.next-step').forEach(button=>{button.addEventListener('click',()=>{if(validateCurrentStep()){steps[currentStep].classList.add('hidden');currentStep=(currentStep+1)%steps.length;showStep(currentStep);}else{alert('Please fill all required fields highlighted in red and make sure you entered numerical data in integer format. (Don\'t worry your information is not stored)');}});});document.querySelectorAll('.prev-step').forEach(button=>{button.addEventListener('click',()=>{steps[currentStep].classList.add('hidden');currentStep=(currentStep-1+steps.length)%steps.length;showStep(currentStep);});});function calculateBodyFat(){const neck = parseFloat(document.getElementById('neck').value),belly = parseFloat(document.getElementById('belly').value),height = parseFloat(document.getElementById('height').value);if(!isNaN(neck)&&!isNaN(belly)&&!isNaN(height)){const bodyFat = (86.01*Math.log10(belly-neck)-70.041*Math.log10(height)+36.76).toFixed(2);document.getElementById('body-fat').value = bodyFat+' %';}}document.getElementById('myForm').addEventListener('submit',function(event){event.preventDefault();calculateBodyFat();document.getElementById('popup').classList.remove('hidden');});document.getElementById('closePopup').addEventListener('click',function(){document.getElementById('popup').classList.add('hidden');window.location.href='./index.html';});const form = document.querySelector('form'),inputs = form.querySelectorAll('input,textarea');let isFormCompleted = false,closePopupPressed = false;inputs.forEach(input=>{input.addEventListener('input',()=>{isFormCompleted = Array.from(inputs).some(input=>input.required&&input.value.trim()==='');});});const closePopupButton = document.querySelector('#close-popup-button');closePopupButton.addEventListener('click',()=>{closePopupPressed = true;});window.addEventListener('beforeunload',function(event){if(isFormCompleted&&!closePopupPressed){const message = "You have unsaved changes. Are you sure you want to leave?";event.returnValue = message;return message;}});const links = document.querySelectorAll('.links'),menuToggle = document.getElementById('menu-toggle'),fullScreenMenu = document.getElementById('full-screen-menu'),menuClose = document.getElementById('menu-close'),contactLink = document.getElementById('mobcontactlink');menuToggle.addEventListener('click',()=>{fullScreenMenu.classList.remove('hidden');document.body.style.overflow='hidden';});links.forEach(link=>{link.addEventListener('click',function(event){if(this===contactLink){event.preventDefault();document.getElementById('contactModal').style.display='flex';}else{fullScreenMenu.classList.add('hidden');document.body.style.overflow='auto';}});});menuClose.addEventListener('click',()=>{fullScreenMenu.classList.add('hidden');document.body.style.overflow='auto';});document.querySelector('.close').addEventListener('click',function(){document.getElementById('contactModal').style.display='none';});window.addEventListener('click',function(event){if(event.target==document.getElementById('contactModal')){document.getElementById('contactModal').style.display='none';}});document.querySelector('.tohome').addEventListener('click',function(){window.location.href='./index.html';});function showStep(step){steps.forEach((s,index)=>{s.classList.toggle('hidden',index!==step);s.classList.toggle('active',index===step);});updateProgressBar();}function updateProgressBar(){const progressBar = document.getElementById('progressBar'),progressPercentage = ((currentStep+1)/steps.length)*100;progressBar.style.width=`${progressPercentage}%`; }showStep(currentStep);
