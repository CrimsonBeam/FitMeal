const currentTheme=localStorage.getItem("theme");currentTheme?document.documentElement.classList.add(currentTheme):document.documentElement.classList.remove("dark");const toggleButton=document.getElementById("theme-toggle");toggleButton.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),document.documentElement.classList.contains("dark")?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light")});const themeToggleButton=document.getElementById("theme-toggle"),themeIcon=document.getElementById("theme-icon");function applySavedTheme(){let e=localStorage.getItem("theme");"dark"===e?(document.body.classList.add("dark-mode"),themeIcon.classList.remove("fa-sun"),themeIcon.classList.add("fa-moon")):(document.body.classList.remove("dark-mode"),themeIcon.classList.remove("fa-moon"),themeIcon.classList.add("fa-sun"))}themeToggleButton.addEventListener("click",()=>{document.body.classList.toggle("dark-mode"),document.body.classList.toggle("dark-modeform"),document.body.classList.contains("dark-mode")?(themeIcon.classList.remove("fa-sun"),themeIcon.classList.add("fa-moon"),localStorage.setItem("theme","dark")):(themeIcon.classList.remove("fa-moon"),themeIcon.classList.add("fa-sun"),localStorage.setItem("theme","light"))}),document.addEventListener("DOMContentLoaded",applySavedTheme);const steps=document.querySelectorAll(".step");let currentStep=0;function validateCurrentStep(){let e=steps[currentStep].querySelectorAll("input[required]"),t=!0;return e.forEach(e=>{e.checkValidity()?e.classList.remove("border-red-500"):(e.classList.add("border-red-500"),t=!1)}),t}function calculateBodyFat(){let e=parseFloat(document.getElementById("neck").value),t=parseFloat(document.getElementById("belly").value),n=parseFloat(document.getElementById("height").value);if(!isNaN(e)&&!isNaN(t)&&!isNaN(n)){let s=(86.01*Math.log10(t-e)-70.041*Math.log10(n)+36.76).toFixed(2);document.getElementById("body-fat").value=s+" %"}}document.querySelectorAll(".next-step").forEach(e=>{e.addEventListener("click",()=>{validateCurrentStep()?(steps[currentStep].classList.add("hidden"),showStep(currentStep=(currentStep+1)%steps.length)):alert("Please fill all required fields highlighted in red and make sure you entered numerical data in integer format. (Don't worry your information is not stored)")})}),document.querySelectorAll(".prev-step").forEach(e=>{e.addEventListener("click",()=>{steps[currentStep].classList.add("hidden"),showStep(currentStep=(currentStep-1+steps.length)%steps.length)})}),document.getElementById("myForm").addEventListener("submit",function(e){e.preventDefault(),calculateBodyFat(),document.getElementById("popup").classList.remove("hidden")}),document.getElementById("closePopup").addEventListener("click",function(){document.getElementById("popup").classList.add("hidden"),window.location.href="./index.html"});const form=document.querySelector("form"),inputs=form.querySelectorAll("input, textarea");let isFormCompleted=!1,closePopupPressed=!1;inputs.forEach(e=>{e.addEventListener("input",()=>{isFormCompleted=Array.from(inputs).some(e=>e.required&&""===e.value.trim())})});const closePopupButton=document.querySelector("#close-popup-button");closePopupButton.addEventListener("click",()=>{closePopupPressed=!0}),window.addEventListener("beforeunload",function(e){if(isFormCompleted&&!closePopupPressed){let t="You have unsaved changes. Are you sure you want to leave?";return e.returnValue=t,t}});const links=document.querySelectorAll(".links"),menuToggle=document.getElementById("menu-toggle"),fullScreenMenu=document.getElementById("full-screen-menu"),menuClose=document.getElementById("menu-close"),contactLink=document.getElementById("mobcontactlink");function showStep(e){steps.forEach((t,n)=>{t.classList.toggle("hidden",n!==e),t.classList.toggle("active",n===e)}),updateProgressBar()}function updateProgressBar(){let e=document.getElementById("progressBar"),t=(currentStep+1)/steps.length*100;e.style.width=`${t}%`}menuToggle.addEventListener("click",()=>{fullScreenMenu.classList.remove("hidden"),document.body.style.overflow="hidden"}),links.forEach(e=>{e.addEventListener("click",function(e){this===contactLink?(e.preventDefault(),document.getElementById("contactModal").style.display="flex"):(fullScreenMenu.classList.add("hidden"),document.body.style.overflow="auto")})}),menuClose.addEventListener("click",()=>{fullScreenMenu.classList.add("hidden"),document.body.style.overflow="auto"}),document.querySelector(".close").addEventListener("click",function(){document.getElementById("contactModal").style.display="none"}),window.addEventListener("click",function(e){e.target==document.getElementById("contactModal")&&(document.getElementById("contactModal").style.display="none")}),document.querySelector(".tohome").addEventListener("click",function(){window.location.href="./index.html"}),showStep(currentStep);